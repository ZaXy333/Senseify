<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Senseify</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles/font.css">
    <link rel="stylesheet" href="../styles/navBar.css">
    <link rel="stylesheet" href="../styles/index.css">
    <link rel="stylesheet" href="../styles/login.css">
    <link rel="icon" type="image/png" href="../materials/logoTest.png">
</head>
<body>
    <div class="main">
        <div class="content">
            <header class="preventSelection">
                <div class="leftHeader roboto-medium">
                    <div class="buttonTop" onclick="window.location = 'about.html'">O nas</div>
                    <div class="buttonTop" onclick="window.location = 'materials/material1.html'">Materiały</div>
                    <div class="buttonTop quiz" onclick="window.location = 'quiz.html'">Quiz</div>
                </div>
                <div class="logo" onclick="window.location='../index.html'">
                    <img src="../materials/logoTest.png" alt="" class="logoImage">
                    <div class="name roboto-medium">
                        <span class="yellow">Sen</span><span class="red">sei</span><span class="blue">fy</span>
                    </div>
                </div>
                <div class="rightHeader">
                    <div class="icon">
                        <img src="../materials/Pin.png" alt="">
                    </div>
                    <div class="icon">
                        <img src="../materials/Search.png" alt="">
                    </div>
                    <div class="buttonSign roboto-medium" onclick="window.location = 'login.html'">Zaloguj się</div>
                    <div class="buttonSign_out roboto-medium" onclick="logOut()">Wyloguj się</div>
                </div>
            </header>

            <div class="rest">
                <div class="login">
                    <div class="topBar"></div>

                    <div class="loginContent">
                        <div class="inputs">
                            <div class="labels">
                                <label for="">Email</label>
                                <input type="email" name="" id="email">
                                <p class="errorEmail error">Podaj prawidłowy adres email</p>
                            </div>
        
                            <div class="labels">
                                <label for="">Hasło</label>
                                <input type="password" name="" id="password">
                                <p class="errorPassword error">Podaj hasło</p>
                            </div>

                            <div class="button loginBtn roboto-medium" onclick="check()">
                                Zaloguj się
                            </div>
                        </div>

                        <span class="middleBar"></span>
                        <div class="right">
                            <div>
                                <p class="text">Nie masz konta?</p>
                                <div class="button registerBtn roboto-medium" onclick="window.location='register.html'">Zarejestruj się</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <script type="module">
            import {log_in} from "../scripts/script.js"
            

            document.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                check()
            }
            });


            function check(){
                
                const email = document.querySelector("#email")
                const password = document.querySelector("#password")

                if(!email.value.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){
                    document.querySelector(".errorEmail").style.opacity = 1
                    document.querySelector("#email").style.outlineColor = "rgb(169, 0, 0)"
                    document.querySelector("#email").focus()
                    return
                }
                
                if(!password.value){
                    document.querySelector(".errorPassword").style.opacity = 1
                    document.querySelector("#password").style.outlineColor = "rgb(169, 0, 0)"
                    document.querySelector("#password").focus()
                    return
                }
                
                log_in(email, password)
            }

            window.check = check
        </script>
    </div>
</body>